<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=GBK" />
<title>ZMMRP0041</title>
<style type="text/css">
.code{ font-family:"Courier New", Courier, monospace; color:#000; font-size:14px; background-color:#F2F4F7 }
  .codeComment {font-family:"Courier New", Courier, monospace; color:#0000F0; font-size:14px; background-color:#F2F4F7 }
  .normalBold{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:12px; font-weight:800 }
  .normalBoldLarge{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:16px; font-weight:800 }
</style>
<style type="text/css">
  .normal{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:12px }
  .footer{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:12px; text-align: center }
  h2{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:16px; font-weight:800 }
  h3{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:14px; font-weight:800 }
  .outerTable{
   background-color:#E0E7ED;
   width:100%;
   border-top-width: thin;
   border-right-width: thin;
   border-right-width: thin;
   border-left-width: thin;
   border-top-style: solid;
   border-right-style: solid;
   border-bottom-style: solid;
   border-left-style: solid;
  }
  .innerTable{
   background-color:#F2F4F7;
   width:100%;
   border-top-width: thin;
   border-right-width: thin;
   border-bottom-width: thin;
   border-left-width: thin;
   border-top-style: solid;
   border-right-style: solid;
   border-bottom-style: solid;
   border-left-style: solid;
  }
</style>
</head>
<body>
<table class="outerTable">
  <tr class="normalBoldLarge">
     <td><h2>Code listing for: ZMMRP0041</h2>
<h3> Description: 商品主数据查询报表</h3></td>
   </tr>
  <tr>
     <td>
     <table class="innerTable">
       <tr>
          <td>
   <div class="code">
REPORT ZMMRP0041.<br />
<br />
TABLES:MARA,MAKT,MBEW,MAW1,MARC,MVKE,ZMMEX0010_MARA,TWPTT.<br />
<br />
DATA: BEGIN OF I_TAB OCCURS 0,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MATNR&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-MATNR,&nbsp;&nbsp;"商品<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTART&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-MTART,&nbsp;&nbsp;"商品类型<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MATKL&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-MATKL,&nbsp;&nbsp;"商品类目<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MAKTX&nbsp;&nbsp;&nbsp;LIKE&nbsp;MAKT-MAKTX,&nbsp;&nbsp;"商品描述<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MEINS&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-MEINS,&nbsp;&nbsp;"计量单位<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXTWG&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-EXTWG,&nbsp;&nbsp;"商品大类<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RAUBE&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-RAUBE,&nbsp;&nbsp;"商品小类<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TEMPB&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-TEMPB,&nbsp;&nbsp;"条码类型<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BEHVO&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-BEHVO,&nbsp;&nbsp;"度量类别<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XCHPF&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-XCHPF,&nbsp;&nbsp;"是否启用批次管理<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BWTTY&nbsp;&nbsp;&nbsp;LIKE&nbsp;MBEW-BWTTY,&nbsp;&nbsp;"是否启用评估类别<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ATTYP&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-ATTYP,&nbsp;&nbsp;"商品类别<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WEKGR&nbsp;&nbsp;&nbsp;LIKE&nbsp;MAW1-WEKGR,&nbsp;&nbsp;"采购组<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAKLV&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-TAKLV,&nbsp;&nbsp;"税收分类<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WBKLA&nbsp;&nbsp;&nbsp;LIKE&nbsp;MAW1-WBKLA,&nbsp;&nbsp;"评估类<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TRAGR&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-TRAGR,&nbsp;&nbsp;"运输组<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WLADG&nbsp;&nbsp;&nbsp;LIKE&nbsp;MAW1-WLADG,&nbsp;&nbsp;"装载组<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LSTFL&nbsp;&nbsp;&nbsp;LIKE&nbsp;MAW1-LSTFL,&nbsp;&nbsp;"存储清单流程<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LSTVZ&nbsp;&nbsp;&nbsp;LIKE&nbsp;MAW1-LSTVZ,&nbsp;&nbsp;"分销中心清单流程<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DISMM&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARC-DISMM,&nbsp;&nbsp;"需求计划类型<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MTVFP&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARC-MTVFP,&nbsp;&nbsp;"可用性检查<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;KONDM&nbsp;&nbsp;&nbsp;LIKE&nbsp;MVKE-KONDM,&nbsp;&nbsp;"商品定价组<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;KTGRM&nbsp;&nbsp;&nbsp;LIKE&nbsp;MVKE-KTGRM,&nbsp;&nbsp;"科目设置组<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_XZ&nbsp;&nbsp;&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_XZ,&nbsp;&nbsp;"形状<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_YT&nbsp;&nbsp;&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_YT,&nbsp;&nbsp;"用途<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_BSCZ&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_BSCZ,&nbsp;&nbsp;"宝石材质<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_PZ&nbsp;&nbsp;&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_PZ,&nbsp;&nbsp;"品质<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_XQFS&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_XQFS,&nbsp;&nbsp;"镶嵌方式<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_JJJB&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_JJJB,&nbsp;&nbsp;"工费加价级别<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_PZ01&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_PZ01,&nbsp;&nbsp;"品种一级<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_PZ02&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_PZ02,&nbsp;&nbsp;"品种二级<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_PZ03&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_PZ03,&nbsp;&nbsp;"品种三级<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_PZ04&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_PZ04,&nbsp;&nbsp;"品种四级<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_TA01&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_TA01,&nbsp;&nbsp;"图案一级<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_TA02&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_TA02,&nbsp;&nbsp;"图案二级<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_GJS&nbsp;&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_GJS,&nbsp;&nbsp;"贵金属材质<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_ZT01&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_ZT01,&nbsp;&nbsp;"主题一级<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_ZT02&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_ZT02,&nbsp;&nbsp;"主题二级<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_ZT03&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_ZT03,&nbsp;&nbsp;"主题三级<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_XFS&nbsp;&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_XFS,&nbsp;&nbsp;"是否消费税<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_LINK&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_LINK,&nbsp;&nbsp;"图片链接<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EX_YEAR&nbsp;LIKE&nbsp;ZMMEX0010_MARA-EX_YEAR,&nbsp;&nbsp;"年份<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SERVV&nbsp;&nbsp;&nbsp;LIKE&nbsp;MAW1-SERVV,&nbsp;&nbsp;"是否EDB需要<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ERSDA&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-ERSDA,&nbsp;&nbsp;"创建日期<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PLGTP&nbsp;&nbsp;&nbsp;LIKE&nbsp;MARA-PLGTP,&nbsp;&nbsp;&nbsp;"标签金含量<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BQJHLMS&nbsp;&nbsp;&nbsp;LIKE&nbsp;TWPTT-VTEXT,&nbsp;&nbsp;"标签金含量描述<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XJBS&nbsp;&nbsp;&nbsp;&nbsp;LIKE&nbsp;TMABCT-TMABC,&nbsp;&nbsp;"下架标识<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END&nbsp;OF&nbsp;I_TAB.<br />
<br />
DATA: BEGIN OF I_TAB_HLMS OCCURS 0,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PLGTP&nbsp;LIKE&nbsp;TWPTT-PLGTP,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VTEXT&nbsp;LIKE&nbsp;TWPTT-VTEXT,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END&nbsp;OF&nbsp;I_TAB_HLMS.<br />
<br />
TYPES: BEGIN OF I_TAB_XJBS ,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MATNR&nbsp;&nbsp;LIKE&nbsp;MAW1-MATNR,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WMAAB&nbsp;&nbsp;LIKE&nbsp;MAW1-WMAAB,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TMABC&nbsp;LIKE&nbsp;TMABCT-TMABC,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END&nbsp;OF&nbsp;I_TAB_XJBS.<br />
DATA: IT_XJBS TYPE  STANDARD TABLE OF I_TAB_XJBS,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WA_XJBS&nbsp;TYPE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I_TAB_XJBS.<br />
<br />
<br />
   </div>
   <div class="codeComment">
*DATA:&nbsp;BEGIN&nbsp;OF&nbsp;I_TAB_XJBSMS&nbsp;OCCURS&nbsp;0,<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MAABC&nbsp;&nbsp;LIKE&nbsp;TMABCT-MAABC,<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TMABC&nbsp;&nbsp;LIKE&nbsp;TMABCT-TMABC,<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END&nbsp;OF&nbsp;I_TAB_XJBS.<br />
   </div>
   <div class="code">
SELECT-OPTIONS:<br />
S_MATNR  FOR MARA-MATNR,<br />
S_ERSDA  FOR MARA-ERSDA,<br />
S_MTART  FOR MARA-MTART,<br />
S_MATKL  FOR MARA-MATKL,<br />
S_MAKTX  FOR MAKT-MAKTX,<br />
S_MEINS  FOR MARA-MEINS,<br />
S_EXTWG  FOR MARA-EXTWG,<br />
S_RAUBE  FOR MARA-RAUBE,<br />
S_TEMPB  FOR MARA-TEMPB,<br />
S_BEHVO  FOR MARA-BEHVO,<br />
S_XCHPF  FOR MARA-XCHPF,<br />
   </div>
   <div class="codeComment">
*S_BWTTY&nbsp;&nbsp;FOR&nbsp;MBEW-BWTTY,<br />
   </div>
   <div class="code">
S_ATTYP  FOR MARA-ATTYP,<br />
   </div>
   <div class="codeComment">
*S_WEKGR&nbsp;&nbsp;FOR&nbsp;MAW1-WEKGR,<br />
   </div>
   <div class="code">
S_TAKLV  FOR MARA-TAKLV,<br />
   </div>
   <div class="codeComment">
*S_WBKLA&nbsp;&nbsp;FOR&nbsp;MAW1-WBKLA,<br />
   </div>
   <div class="code">
S_TRAGR  FOR MARA-TRAGR,<br />
   </div>
   <div class="codeComment">
*S_WLADG&nbsp;&nbsp;FOR&nbsp;MAW1-WLADG,<br />
*S_LSTFL&nbsp;&nbsp;FOR&nbsp;MAW1-LSTFL,<br />
*S_LSTVZ&nbsp;&nbsp;FOR&nbsp;MAW1-LSTVZ,<br />
*S_DISMM&nbsp;&nbsp;FOR&nbsp;MARC-DISMM,<br />
*S_MTVFP&nbsp;&nbsp;FOR&nbsp;MARC-MTVFP,<br />
*S_KONDM&nbsp;&nbsp;FOR&nbsp;MVKE-KONDM,<br />
*S_KTGRM&nbsp;&nbsp;FOR&nbsp;MVKE-KTGRM,<br />
*S_EX_XZ&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_XZ,<br />
*S_EX_YT&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_YT,<br />
   </div>
   <div class="code">
SEX_BSCZ FOR ZMMEX0010_MARA-EX_BSCZ,<br />
   </div>
   <div class="codeComment">
*S_EX_PZ&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_PZ,<br />
*SEX_XQFS&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_XQFS,<br />
*SEX_JJJB&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_JJJB,<br />
*SEX_PZ01&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_PZ01,<br />
*SEX_PZ02&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_PZ02,<br />
*SEX_PZ03&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_PZ03,<br />
   </div>
   <div class="code">
SEX_PZ04  FOR ZMMEX0010_MARA-EX_PZ04,<br />
   </div>
   <div class="codeComment">
*SEX_TA01&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_TA01,<br />
   </div>
   <div class="code">
SEX_TA02  FOR ZMMEX0010_MARA-EX_TA02,<br />
S_EX_GJS  FOR ZMMEX0010_MARA-EX_GJS,<br />
   </div>
   <div class="codeComment">
*SEX_ZT01&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_ZT01,<br />
*SEX_ZT02&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_ZT02,<br />
   </div>
   <div class="code">
SEX_ZT03  FOR ZMMEX0010_MARA-EX_ZT03,<br />
   </div>
   <div class="codeComment">
*S_EX_XFS&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_XFS,<br />
*SEX_LINK&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_LINK,<br />
*SEX_YEAR&nbsp;&nbsp;FOR&nbsp;ZMMEX0010_MARA-EX_YEAR,<br />
*S_SERVV&nbsp;&nbsp;FOR&nbsp;MAW1-SERVV.<br />
   </div>
   <div class="code">
BQJHL     FOR  MARA-PLGTP,<br />
S_XJBS      FOR  MAW1-WMAAB.<br />
<br />
SELECT DISTINCT<br />
A~MATNR<br />
A~MTART<br />
A~MATKL<br />
B~MAKTX<br />
A~MEINS<br />
A~EXTWG<br />
A~RAUBE<br />
A~TEMPB<br />
A~BEHVO<br />
A~XCHPF<br />
C~BWTTY<br />
A~ATTYP<br />
D~WEKGR<br />
A~TAKLV<br />
D~WBKLA<br />
A~TRAGR<br />
D~WLADG<br />
D~LSTFL<br />
D~LSTVZ<br />
E~DISMM<br />
E~MTVFP<br />
F~KONDM<br />
F~KTGRM<br />
G~EX_XZ<br />
G~EX_YT<br />
G~EX_BSCZ<br />
G~EX_PZ<br />
G~EX_XQFS<br />
G~EX_JJJB<br />
G~EX_PZ01<br />
G~EX_PZ02<br />
G~EX_PZ03<br />
G~EX_PZ04<br />
G~EX_TA01<br />
G~EX_TA02<br />
G~EX_GJS<br />
G~EX_ZT01<br />
G~EX_ZT02<br />
G~EX_ZT03<br />
G~EX_XFS<br />
G~EX_LINK<br />
G~EX_YEAR<br />
D~SERVV<br />
A~ERSDA<br />
A~PLGTP<br />
INTO CORRESPONDING FIELDS OF TABLE I_TAB<br />
FROM MARA AS A<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JOIN&nbsp;MAKT&nbsp;AS&nbsp;B<br />
ON A~MATNR = B~MATNR<br />
LEFT JOIN MBEW AS C<br />
ON A~MATNR = C~MATNR<br />
LEFT JOIN MAW1 AS D<br />
ON A~MATNR = D~MATNR<br />
LEFT JOIN MARC AS E<br />
ON A~MATNR = E~MATNR<br />
LEFT JOIN MVKE AS F<br />
ON A~MATNR = F~MATNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JOIN&nbsp;ZMMEX0010_MARA&nbsp;AS&nbsp;G<br />
ON A~MATNR = G~MATNR<br />
WHERE<br />
&nbsp;&nbsp;&nbsp;&nbsp;A~MATNR&nbsp;IN&nbsp;S_MATNR<br />
AND A~ERSDA IN S_ERSDA<br />
AND A~MTART IN S_MTART<br />
AND A~MATKL IN S_MATKL<br />
AND A~MEINS IN S_MEINS<br />
AND A~EXTWG IN S_EXTWG<br />
AND A~RAUBE IN S_RAUBE<br />
AND A~TEMPB IN S_TEMPB<br />
AND A~BEHVO IN S_BEHVO<br />
AND A~XCHPF IN S_XCHPF<br />
AND A~ATTYP IN S_ATTYP<br />
AND A~TAKLV IN S_TAKLV<br />
AND A~TRAGR IN S_TRAGR<br />
AND B~MAKTX IN S_MAKTX<br />
AND G~EX_PZ04  IN SEX_PZ04<br />
AND G~EX_TA02  IN SEX_TA02<br />
AND G~EX_ZT03  IN SEX_ZT03<br />
AND G~EX_BSCZ  IN SEX_BSCZ<br />
AND G~EX_GJS  IN S_EX_GJS<br />
and A~PLGTP IN BQJHL.<br />
<br />
SORT I_TAB BY MATNR.<br />
DELETE ADJACENT DUPLICATES FROM I_TAB COMPARING ALL FIELDS.<br />
<br />
select PLGTP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VTEXT<br />
INTO  TABLE  I_TAB_HLMS<br />
from TWPTT.<br />
<br />
SELECT  A~MATNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A~WMAAB<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B~TMABC<br />
INTO TABLE IT_XJBS<br />
FROM MAW1 AS A   INNER JOIN<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TMABCT&nbsp;AS&nbsp;B&nbsp;ON&nbsp;A~WMAAB&nbsp;=&nbsp;B~MAABC<br />
FOR ALL ENTRIES IN I_TAB<br />
WHERE MATNR = I_TAB-MATNR<br />
&nbsp;&nbsp;AND&nbsp;SPRAS&nbsp;EQ&nbsp;SY-LANGU<br />
&nbsp;&nbsp;AND&nbsp;WMAAB&nbsp;IN&nbsp;S_XJBS.<br />
<br />
SORT IT_XJBS  BY MATNR.<br />
LOOP AT I_TAB[] INTO I_TAB .<br />
&nbsp;&nbsp;&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;IT_XJBS&nbsp;INTO&nbsp;WA_XJBS&nbsp;WITH&nbsp;&nbsp;KEY&nbsp;MATNR&nbsp;=&nbsp;&nbsp;I_TAB-MATNR&nbsp;BINARY&nbsp;SEARCH.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I_TAB-XJBS&nbsp;=&nbsp;WA_XJBS-TMABC.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MODIFY&nbsp;I_TAB[]&nbsp;FROM&nbsp;I_TAB&nbsp;TRANSPORTING&nbsp;XJBS&nbsp;.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;CLEAR:&nbsp;I_TAB.<br />
ENDLOOP.<br />
<br />
IF S_XJBS IS NOT INITIAL.<br />
&nbsp;&nbsp;DELETE&nbsp;I_TAB[]&nbsp;WHERE&nbsp;XJBS&nbsp;IS&nbsp;&nbsp;INITIAL.<br />
ENDIF.<br />
<br />
LOOP AT I_TAB[] INTO I_TAB.<br />
&nbsp;&nbsp;READ&nbsp;TABLE&nbsp;I_TAB_HLMS[]&nbsp;INTO&nbsp;I_TAB_HLMS&nbsp;WITH&nbsp;KEY&nbsp;&nbsp;PLGTP&nbsp;=&nbsp;I_TAB-PLGTP&nbsp;.<br />
&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;=&nbsp;0.<br />
&nbsp;&nbsp;I_TAB-BQJHLMS&nbsp;=&nbsp;I_TAB_HLMS-VTEXT.<br />
&nbsp;&nbsp;MODIFY&nbsp;I_TAB[]&nbsp;FROM&nbsp;I_TAB.<br />
&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;CLEAR:&nbsp;I_TAB.<br />
ENDLOOP.<br />
<br />
<br />
PERFORM FM_SHOW_ALV.<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;loop&nbsp;at&nbsp;I_TAB.<br />
*&nbsp;&nbsp;&nbsp;&nbsp;write&nbsp;i_tab.<br />
*&nbsp;&nbsp;&nbsp;&nbsp;skip.<br />
*&nbsp;&nbsp;&nbsp;&nbsp;endloop.<br />
<br />
   </div>
   <div class="code">
FORM FM_SHOW_ALV.<br />
&nbsp;&nbsp;DATA:<br />
&nbsp;&nbsp;&nbsp;&nbsp;LW_DISVARIANT&nbsp;TYPE&nbsp;DISVARIANT,<br />
&nbsp;&nbsp;&nbsp;&nbsp;LW_FIELDCAT&nbsp;&nbsp;&nbsp;TYPE&nbsp;LVC_S_FCAT,<br />
&nbsp;&nbsp;&nbsp;&nbsp;LT_FIELDCAT&nbsp;&nbsp;&nbsp;TYPE&nbsp;LVC_T_FCAT,<br />
&nbsp;&nbsp;&nbsp;&nbsp;LW_LAYOUT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;LVC_S_LAYO.<br />
   </div>
   <div class="codeComment">
*&nbsp;宏<br />
   </div>
   <div class="code">
&nbsp;&nbsp;DEFINE&nbsp;DF_ADD_FIELDCAT.<br />
&nbsp;&nbsp;&nbsp;&nbsp;CLEAR&nbsp;LW_FIELDCAT.<br />
&nbsp;&nbsp;&nbsp;&nbsp;LW_FIELDCAT-COL_POS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"列位置<br />
&nbsp;&nbsp;&nbsp;&nbsp;LW_FIELDCAT-FIELDNAME&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"要显示的字段<br />
&nbsp;&nbsp;&nbsp;&nbsp;LW_FIELDCAT-COLTEXT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"字段名<br />
&nbsp;&nbsp;&nbsp;&nbsp;LW_FIELDCAT-JUST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"对齐方式<br />
&nbsp;&nbsp;&nbsp;&nbsp;LW_FIELDCAT-EDIT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"可编辑<br />
&nbsp;&nbsp;&nbsp;&nbsp;LW_FIELDCAT-REF_TABLE&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&6.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"引用表<br />
&nbsp;&nbsp;&nbsp;&nbsp;LW_FIELDCAT-REF_FIELD&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"引用字段<br />
&nbsp;&nbsp;&nbsp;&nbsp;APPEND&nbsp;LW_FIELDCAT&nbsp;TO&nbsp;LT_FIELDCAT.<br />
&nbsp;&nbsp;END-OF-DEFINITION.<br />
   </div>
   <div class="codeComment">
*&nbsp;数据转换（GT_IN_TAB=&gt;GT_OUT_TAB）<br />
*&nbsp;STEP1:创建FIELDCAT<br />
*&nbsp;固定部分<br />
   </div>
   <div class="code">
&nbsp;&nbsp;DF_ADD_FIELDCAT:<br />
1 'MATNR' TEXT-001 'L' '' 'MARA' 'MATNR',<br />
2 'MTART' TEXT-002 'L' '' 'MARA' 'MTART',<br />
3 'MATKL' TEXT-003 'L' '' 'MARA' 'MATKL',<br />
4 'MAKTX' TEXT-004 'L' '' 'MAKT' 'MAKTX',<br />
5 'MEINS' TEXT-005 'L' '' 'MARA' 'MEINS',<br />
6 'EXTWG' TEXT-006 'L' '' 'MARA' 'EXTWG',<br />
7 'RAUBE' TEXT-007 'L' '' 'MARA' 'RAUBE',<br />
8 'TEMPB' TEXT-008 'L' '' 'MARA' 'TEMPB',<br />
9 'BEHVO' TEXT-009 'L' '' 'MARA' 'BEHVO',<br />
10 'XCHPF' TEXT-010 'L' '' 'MARA' 'XCHPF',<br />
11 'BWTTY' TEXT-011 'L' '' 'MBEW' 'BWTTY',<br />
12 'ATTYP' TEXT-012 'L' '' 'MARA' 'ATTYP',<br />
13 'WEKGR' TEXT-013 'L' '' 'MAW1' 'WEKGR',<br />
14 'TAKLV' TEXT-014 'L' '' 'MARA' 'TAKLV',<br />
15 'WBKLA' TEXT-015 'L' '' 'MAW1' 'WBKLA',<br />
16 'TRAGR' TEXT-016 'L' '' 'MARA' 'TRAGR',<br />
17 'WLADG' TEXT-017 'L' '' 'MAW1' 'WLADG',<br />
18 'LSTFL' TEXT-018 'L' '' 'MAW1' 'LSTFL',<br />
19 'LSTVZ' TEXT-019 'L' '' 'MAW1' 'LSTVZ',<br />
20 'DISMM' TEXT-020 'L' '' 'MARC' 'DISMM',<br />
21 'MTVFP' TEXT-021 'L' '' 'MARC' 'MTVFP',<br />
22 'KONDM' TEXT-022 'L' '' 'MVKE' 'KONDM',<br />
23 'KTGRM' TEXT-023 'L' '' 'MVKE' 'KTGRM',<br />
24 'EX_XZ' TEXT-024 'L' '' 'ZMMEX0010_MARA' 'EX_XZ',<br />
25 'EX_YT' TEXT-025 'L' '' 'ZMMEX0010_MARA' 'EX_YT',<br />
26 'EX_BSCZ' TEXT-026 'L' '' 'ZMMEX0010_MARA' 'EX_BSCZ',<br />
27 'EX_PZ' TEXT-027 'L' '' 'ZMMEX0010_MARA' 'EX_PZ',<br />
28 'EX_XQFS' TEXT-028 'L' '' 'ZMMEX0010_MARA' 'EX_XQFS',<br />
29 'EX_JJJB' TEXT-029 'L' '' 'ZMMEX0010_MARA' 'EX_JJJB',<br />
30 'EX_PZ01' TEXT-030 'L' '' 'ZMMEX0010_MARA' 'EX_PZ01',<br />
31 'EX_PZ02' TEXT-031 'L' '' 'ZMMEX0010_MARA' 'EX_PZ02',<br />
32 'EX_PZ03' TEXT-032 'L' '' 'ZMMEX0010_MARA' 'EX_PZ03',<br />
33 'EX_PZ04' TEXT-033 'L' '' 'ZMMEX0010_MARA' 'EX_PZ04',<br />
34 'EX_TA01' TEXT-034 'L' '' 'ZMMEX0010_MARA' 'EX_TA01',<br />
35 'EX_TA02' TEXT-035 'L' '' 'ZMMEX0010_MARA' 'EX_TA02',<br />
36 'EX_GJS' TEXT-036 'L' '' 'ZMMEX0010_MARA' 'EX_GJS',<br />
37 'EX_ZT01' TEXT-037 'L' '' 'ZMMEX0010_MARA' 'EX_ZT01',<br />
38 'EX_ZT02' TEXT-038 'L' '' 'ZMMEX0010_MARA' 'EX_ZT02',<br />
39 'EX_ZT03' TEXT-039 'L' '' 'ZMMEX0010_MARA' 'EX_ZT03',<br />
40 'EX_XFS' TEXT-040 'L' '' 'ZMMEX0010_MARA' 'EX_XFS',<br />
41 'EX_LINK' TEXT-041 'L' '' 'ZMMEX0010_MARA' 'EX_LINK',<br />
42 'EX_YEAR' TEXT-042 'L' '' 'ZMMEX0010_MARA' 'EX_YEAR',<br />
43 'SERVV' TEXT-043 'L' '' 'MAW1' 'SERVV',<br />
44 'ERSDA' TEXT-044 'L' '' 'MARA' 'ERSDA',<br />
45 'BQJHLMS' '标称金含量描述' 'L' '' 'TWPTT' 'VTEXT',<br />
46 'XJBS' '下架款查询' 'L' '' 'TMABCT' 'TMABC'.<br />
<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;&nbsp;特性数据<br />
   </div>
   <div class="code">
&nbsp;&nbsp;LW_LAYOUT-CWIDTH_OPT&nbsp;=&nbsp;ABAP_TRUE.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"优化列宽设置<br />
   </div>
   <div class="codeComment">
*&nbsp;调用ALV<br />
   </div>
   <div class="code">
&nbsp;&nbsp;LW_DISVARIANT-REPORT&nbsp;&nbsp;=&nbsp;SY-REPID.<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;LW_DISVARIANT-VARIANT&nbsp;=&nbsp;P_LAYOUT.<br />
   </div>
   <div class="code">
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'REUSE_ALV_GRID_DISPLAY_LVC'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I_CALLBACK_PROGRAM&nbsp;=&nbsp;SY-REPID<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IS_LAYOUT_LVC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;LW_LAYOUT<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IT_FIELDCAT_LVC&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;LT_FIELDCAT<br />
   </div>
   <div class="codeComment">
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I_SAVE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;'A'<br />
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IS_VARIANT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;LW_DISVARIANT<br />
   </div>
   <div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T_OUTTAB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;I_TAB<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXCEPTIONS<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PROGRAM_ERROR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OTHERS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;2.<br />
&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;&lt;&gt;&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;E001(00)&nbsp;WITH&nbsp;'系统错误'&nbsp;SPACE&nbsp;SPACE&nbsp;SPACE.<br />
&nbsp;&nbsp;ENDIF.<br />
ENDFORM.<br />
<br />
<br />
   </div>
   <div class="codeComment">
*Selection&nbsp;texts<br />
*----------------------------------------------------------<br />
*&nbsp;BQJHL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;标称含金量<br />
*&nbsp;SEX_BSCZ&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;SEX_PZ04&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;SEX_TA02&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;SEX_ZT03&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_ATTYP&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_BEHVO&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_ERSDA&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_EXTWG&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_EX_GJS&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_MAKTX&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_MATKL&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_MATNR&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_MEINS&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_MTART&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_RAUBE&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_TAKLV&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_TEMPB&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_TRAGR&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_XCHPF&nbsp;D&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<br />
*&nbsp;S_XJBS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;新品/下架标识<br />
<br />
<br />
*Messages<br />
*----------------------------------------------------------<br />
*<br />
*&nbsp;Message&nbsp;class:&nbsp;00<br />
*001&nbsp;&nbsp;&nbsp;&1&2&3&4&5&6&7&8<br />
            </div>
          </td>
        </tr>
      </table>
      </td>
      </tr>
   <tr>
<td class="footer">www.bjcaibai.com.cn201609</td>
   </tr>
</table>
</body>
</html>
